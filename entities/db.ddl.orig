################################INIT#####################################################
#CREATE DATABASE IF NOT EXISTS 'mst';
USE MST;
SET FOREIGN_KEY_CHECKS=1;
################################DROP THE TABLES FIRST####################################
DROP TABLE IF EXISTS USER;
DROP TABLE IF EXISTS CUSTOMER;
DROP TABLE IF EXISTS CUSTOMER_RESPONSE;
DROP TABLE IF EXISTS CUSTOMER_QUESTIONNAIRE;
DROP TABLE IF EXISTS QUESTIONNAIRE;
DROP TABLE IF EXISTS QUESTION;
DROP TABLE IF EXISTS ANSWER;
DROP TABLE IF EXISTS EXPENSE;
DROP TABLE IF EXISTS EXPENSE_LINE_ITEM;
###############################CREATE THE TABLES#########################################
CREATE TABLE USER
(
ID INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
USER_NAME CHAR(15) NOT NULL UNIQUE,
PASSWORD CHAR(20) NOT NULL,
CUSTOMER_ID INTEGER REFERENCES CUSTOMER
) TYPE=INNODB;

CREATE TABLE CUSTOMER
(
ID INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
FIRST_NAME VARCHAR(25),
MIDDLE_INITIAL CHAR(1),
LAST_NAME VARCHAR(35),
AGE_GROUP_CD VARCHAR(10),
GENDER_CD VARCHAR(10),
INTERNET_YEARS_EXPERIENCE_CD VARCHAR (10),
INTERNET_HOURS_PER_WEEK CHAR(2),
INCOME_CD VARCHAR (10),
LEVEL_OF_EDUCATION_CD VARCHAR(10)
) TYPE=INNODB;

CREATE TABLE EXPENSE
(
ID INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
EXP_NAME VARCHAR(30),
EXP_COST_CENTER VARCHAR(10),
EXP_TEMPLATE CHAR(10),
EXP_PURPOSE VARCHAR(20),
EXP_APPROVER VARCHAR(30),
EXP_CUSTOMER_ID INTEGER REFERENCES CUSTOMER
)TYPE=INNODB;

CREATE TABLE EXPENSE_LINE_ITEM
(
ID INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
LI_EXP_NUM_OF_DAYS INTEGER,
LI_EXP_CATEGORY VARCHAR(30),
LI_TYPE CHAR(4),
LI_EXP_TYPE CHAR(10),
LI_EXP_QUALIFIED BOOL,
LI_EXP_TX_DATE DATE,
LI_EXP_TX_AMT DOUBLE,
LI_EXP_TX_JUSTIFICATION VARCHAR(255),
LI_EDU_START_DATE DATE,
LI_EDU_END_DATE DATE,
LI_EDU_SCHOOL_NAME VARCHAR(80),
LI_EDU_COURSE_NAME VARCHAR(80),
LI_EDU_GRADE CHAR(1),
LI_EDU_LEVEL CHAR(04),
EXPENSE_ID INTEGER REFERENCES EXPENSE
)TYPE=INNODB;

CREATE TABLE CUSTOMER_QUESTIONNAIRE
(
QUESTIONNAIRE_ID INTEGER,
CUSTOMER_ID INTEGER REFERENCES CUSTOMER,
QUESTIONNAIRE_STATUS CHAR(1)
)TYPE=INNODB;

CREATE TABLE CUSTOMER_RESPONSE
(
QUESTION_ID INTEGER,
ANSWER_ID INTEGER,
CUSTOMER_ID INTEGER,
FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER (ID)
);

CREATE TABLE ANSWER
(
ID INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
CODE CHAR(6),
TEXT VARCHAR(120),
QUESTION_ID INTEGER REFERENCES QUESTION
)TYPE=INNODB;

CREATE TABLE QUESTION
(
ID INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
CODE CHAR(6),
TEXT VARCHAR(255),
QUESTIONNAIRE_ID INTEGER REFERENCES QUESTIONNAIRE
)TYPE=INNODB;

CREATE TABLE QUESTIONNAIRE
(
ID INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
NAME CHAR(15)
)TYPE=INNODB;
